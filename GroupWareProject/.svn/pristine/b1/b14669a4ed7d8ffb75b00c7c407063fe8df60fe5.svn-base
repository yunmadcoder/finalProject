<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<style>
th>span {
	font-weight: 600;
}
.nav-link.active {
	color: #00a1b9 !important;
}
</style>

<div class="card rounded-0 flex-fill m-0" style="min-height: 800px;">
	<div class="card-body p-0">
		<div class="m-3 ms-4">
			<h3 class="m-0">업무 기안</h3>
		</div>
		<ul class="nav nav-underline ms-4 border-bottom" id="tab">
			<li class="nav-item">
				<a class="nav-link <c:if test='${type == "all"}'>active</c:if>" href="#" id="allLink">
					<span>전체</span>
				</a>
			</li>
			<li class="nav-item">
				<a class="nav-link <c:if test='${type == "wait"}'>active</c:if>" href="#" id="waitLink">
					<span>대기</span>
				</a>
			</li>
			<li class="nav-item">
				<a class="nav-link <c:if test='${type == "hold"}'>active</c:if>" href="#" id="holdLink">
					<span>보류</span>
				</a>
			</li>
		</ul>
		<table class="table table-borderless w-100">
			<colgroup>
				<col width="5%">
				<col width="10%">
				<col width="10%">
				<col width="10%">
				<col width="45%">
				<col width="10%">
			</colgroup>
			<thead class="border-bottom text-start">
				<tr>
					<th>
						<input type="checkbox" class="form-check" id="selectAll">
					</th>
					<th>
						<span>기안일</span>
					</th>
					<th>
						<span>결재양식</span>
					</th>
					<th>
						<span>긴급</span>
					</th>
					<th>
						<span>제목</span>
					</th>
					<th>
						<span>첨부</span>
					</th>
					<th>
						<span>기안자</span>
					</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<c:if test="${approvalList == null }">
						<td colspan="7">
							<p class="p-3 text-center">결재할 문서가 없습니다.</p>
						</td>
					</c:if>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
			</tbody>
		</table>
	</div>
</div>

<script>
let tab = $('#tab');

tab.on('click', 'a', function() {
	let links = ['allLink', 'waitLink', 'holdLink'];
	let id = $(this).attr('id');
	let href = '/approval/list/';
	
	let isLink = links.find(link => link == id);
	
	if(isLink) {
		if(id == 'allLink') {
			href += 'all';
		}else if (id == 'waitLink'){
			href += 'wait';			
		}else {
			href += 'hold';
		}
	}
	
	location.href = href;
});
</script>