<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<div class="widget-content searchable-container list">

	<div class="container-fluid">
		<div class="container-fluid">
			<div class="card bg-info-subtle shadow-none position-relative overflow-hidden mb-4">
				<ul class="nav nav-pills user-profile-tab justify-content-center" id="pills-tab" role="tablist">
						<li class="nav-item" role="presentation">
							<button class="nav-link position-relative rounded-0 d-flex align-items-center justify-content-center bg-transparent fs-3 py-4" onclick="window.location.href='/reservationList';" id="pills-stop-tab" data-bs-toggle="pill" data-bs-target="#pills-stop" type="button" role="tab" aria-controls="pills-stop" aria-selected="true">
								<span class="d-none d-md-block">&nbsp;&nbsp;&nbsp;&nbsp;시설물 이용 안내&nbsp;&nbsp;&nbsp;&nbsp;</span>
							</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link position-relative rounded-0 d-flex align-items-center justify-content-center bg-transparent fs-3 py-4" onclick="window.location.href='/reservation';" id="pills-stop-tab" data-bs-toggle="pill" data-bs-target="#pills-stop" type="button" role="tab" aria-controls="pills-stop" aria-selected="true">
								<span class="d-none d-md-block">&nbsp;&nbsp;&nbsp;&nbsp;시설물 예약하기&nbsp;&nbsp;&nbsp;&nbsp;</span>
							</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link position-relative rounded-0 d-flex align-items-center justify-content-center bg-transparent fs-3 py-4" onclick="window.location.href='/reservationList';" id="pills-stop-tab" data-bs-toggle="pill" data-bs-target="#pills-stop" type="button" role="tab" aria-controls="pills-stop" aria-selected="true">
								<span class="d-none d-md-block">&nbsp;&nbsp;&nbsp;&nbsp;예약현황보기&nbsp;&nbsp;&nbsp;&nbsp;</span>
							</button>
						</li>
					</ul>
			</div>
 
 		<br>
		<form action="" method="post" id="searchForm">
			<div class="card card-body">
				<div class="row">
					
					<div class="col-md-8 col-xl-9 text-end d-flex justify-content-md-end justify-content-center mt-3 mt-md-0">
						<div class="action-btn show-btn">
							<a href="javascript:void(0)" class="delete-multiple bg-danger-subtle btn me-2 text-danger d-flex align-items-center ">
								<i class="ti ti-trash text-danger me-1 fs-5"></i> Delete All Row 
							</a>
						</div>
					</div>
					<div class="col-md-4 col-xl-3">
						<input type="text" class="form-control product-search ps-5" id="searchForm" placeholder="검색어를 입력해주세요">
					</div>
						<input type="hidden" name="page" id="page" />
					
				</div>
			</div>

			<div class="card card-body">
				<div class="table-responsive">
					<table class="table search-table align-middle text-nowrap">
						<thead class="header-item">
							<tr>
								<th>
									<div class="n-chk align-self-center text-center">
										<div class="form-check">
											<input type="checkbox" class="form-check-input primary" id="contact-check-all">
											<label class="form-check-label" for="contact-check-all"></label> <span class="new-control-indicator"></span>
										</div>
									</div>
								</th>
								<th>시설명</th>
								<th>예약번호</th>
								<th style="width: 30%" >예약시간</th>
								<th>예약내용</th>
								<th>상태</th>
							
							</tr>
						</thead>
						<tbody>
						<!--startRow  -->
							<c:set value="${pagingVO.dataList }" var="reservList" />
							<c:choose>
								<c:when test="${empty reservList }">
									<tr>
										<td colspan="5">조회하신 예약내역이 존재하지 않습니다</td>
									</tr>
								</c:when>
								<c:otherwise>
									<c:forEach items="${reservList }" var="reservVO">
										<tr class="search-items">
											<td>
												<div class="n-chk align-self-center text-center">
													<div class="form-check">
														<input type="checkbox" class="form-check-input contact-chkbox primary" id="checkbox1">
														<label class="form-check-label" for="checkbox1"></label>
													</div>
												</div>
											</td>
											<td>
												<div class="d-flex align-items-center">
													<img src="../assets/images/profile/user-2.jpg" alt="avatar" class="rounded-circle" width="35">
													<div class="ms-3">
														<div class="user-meta-info">
															<span class="user-work fs-3" data-occupation="Web Developer"> <c:choose>
																	<c:when test="${reservVO.mtngRoomNo == 1}">
															            제1회의실
															        </c:when>
																	<c:when test="${reservVO.mtngRoomNo == 2}">
															            제2회의실
															        </c:when>
																	<c:when test="${reservVO.mtngRoomNo == 3}">
															            제3회의실
															        </c:when>
																	<c:when test="${reservVO.mtngRoomNo == 4}">
															            제4회의실
															        </c:when>
																	<c:when test="${reservVO.mtngRoomNo == 5}">
															            제5회의실
															        </c:when>
																	<c:otherwise>
														            알수없는 회의실
														        </c:otherwise>
																</c:choose>
															</span>
														</div>
													</div>
												</div>
											</td>
											<td>
												<span class="usr-email-addr">${reservVO.resveNo }</span>
											</td>
											<td>
												<span class="usr-location"> <fmt:formatDate value="${reservVO.resveBeginDt}" pattern="yyyy/MM/dd HH:mm" /> ~ <fmt:formatDate value="${reservVO.resveEndDt}" pattern="yyyy/MM/dd HH:mm" /></span>
											</td>
											<td>
												<span class="usr-ph-no">${reservVO.resveCn }</span>
											</td>
											<td>
												<div class="action-btn">
													<a href="/myReservation/detail?resveNo=${reservVO.resveNo }" class="text-primary edit">
														<span class="badge rounded-pill bg-primary-subtle text-primary fw-semibold fs-2">상세보기</span>
													</a>

												</div>
											</td>
										</tr>
									</c:forEach>
								</c:otherwise>
							</c:choose>
						</tbody>
					</table>
				</div>
				<nav style="margin-top: 20px;" aria-label="Page navigation example" id="pagingArea">${pagingVO.pagingHTML}</nav>
				<sec:csrfInput />
			</div>
		</form>
	</div>

</div>


<c:if test="${not empty message }">
	<script>
		showToast("${message}", 'info');
		<c:remove var="message" scope="request"/>
	</script>
</c:if>
<script type="text/javascript">
// 페이징 처리
$(function() {
	var searchForm = $("#searchForm");
	var pagingArea = $("#pagingArea");

	pagingArea.on("click", "a", function(event) {
		event.preventDefault();
		var pageNo = $(this).data("page");
		searchForm.find("#page").val(pageNo);
		searchForm.submit();
	});
});

</script>
